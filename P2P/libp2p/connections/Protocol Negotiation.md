One of libp2p's core design goals is to be adaptable to many network environments, including those that don't yet exist. To provide this flexibility, the connection upgrade process supports multiple protocols for connection security and stream multiplexing and allows peers to select which to use for each connection.

The process of selecting protocols is called **protocol negotiation**. In addition to its role in the connection upgrade process, protocol negotiation is also used whenever [a new stream is opened over an existing connection](https://github.com/libp2p/specs/blob/master/connections/README.md#opening-new-streams-over-a-connection). This allows libp2p applications to route application-specific protocols to the correct handler functions.

Each protocol supported by a peer is identified using a unique string called a **protocol id**. While any string can be used, the conventional format is a path-like structure containing a short name and a version number, separated by `/` characters. For example: `/yamux/1.0.0` identifies version 1.0.0 of the [`yamux` stream multiplexing protocol](https://github.com/hashicorp/yamux/blob/master/spec.md). multistream-select itself has a protocol id of `/multistream/1.0.0`.

Including a version number in the protocol id simplifies the case where you want to concurrently support multiple versions of a protocol, perhaps a stable version and an in-development version. By default, libp2p will route each protocol id to its handler function using exact literal matching of the protocol id, so new versions will need to be registered separately. However, the handler function receives the protocol id negotiated for each new stream, so it's possible to register the same handler for multiple versions of a protocol and dynamically alter functionality based on the version in use for a given stream.